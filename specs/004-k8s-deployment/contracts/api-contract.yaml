# API Contract: AI Todo Chatbot Service

## Overview
This document defines the API contract for the AI Todo Chatbot service deployed in Kubernetes. The service maintains the same API interface as Phase III to ensure compatibility.

## Base URL
`http://ai-todo-chatbot-service:8000` (internal Kubernetes service)
`http://[INGRESS_HOST]` (external access via ingress)

## API Endpoints

### 1. Chat Endpoint
**POST** `/chat`

**Description**: Process user input and return AI-generated response for todo operations.

**Request**:
```json
{
  "message": "string (user input message)",
  "user_id": "string (optional, user identifier)"
}
```

**Response**:
```json
{
  "response": "string (AI-generated response)",
  "action": "string (optional, specific action to perform)",
  "todos": "array (optional, list of todos if relevant to response)",
  "status": "string (success|error)"
}
```

**Headers**:
- `Content-Type: application/json`
- `Accept: application/json`

### 2. Health Check
**GET** `/health`

**Description**: Check the health status of the AI Todo Chatbot service.

**Response**:
```json
{
  "status": "healthy",
  "timestamp": "ISO 8601 datetime",
  "version": "string (application version)"
}
```

### 3. Todo Operations (Inherited from Phase III)
**GET** `/todos`

**Description**: Retrieve all todos for the user.

**Response**:
```json
{
  "todos": [
    {
      "id": "string",
      "task": "string",
      "completed": "boolean",
      "created_at": "ISO 8601 datetime"
    }
  ]
}
```

**POST** `/todos`

**Description**: Create a new todo.

**Request**:
```json
{
  "task": "string (todo task description)"
}
```

**Response**:
```json
{
  "id": "string",
  "task": "string",
  "completed": "boolean",
  "created_at": "ISO 8601 datetime"
}
```

**PUT** `/todos/{id}`

**Description**: Update a todo.

**Request**:
```json
{
  "task": "string (optional, updated task description)",
  "completed": "boolean (optional, completion status)"
}
```

**Response**:
```json
{
  "id": "string",
  "task": "string",
  "completed": "boolean",
  "created_at": "ISO 8601 datetime",
  "updated_at": "ISO 8601 datetime"
}
```

**DELETE** `/todos/{id}`

**Description**: Delete a todo.

**Response**:
```json
{
  "message": "string (confirmation message)",
  "deleted_id": "string"
}
```

## Error Responses

All error responses follow this format:
```json
{
  "error": "string (error message)",
  "code": "string (error code)",
  "timestamp": "ISO 8601 datetime"
}
```

## Kubernetes-Specific Endpoints

### 1. Metrics
**GET** `/metrics`

**Description**: Prometheus-compatible metrics endpoint for monitoring.

### 2. Readiness Probe
**GET** `/ready`

**Description**: Kubernetes readiness probe endpoint.

### 3. Liveness Probe
**GET** `/live`

**Description**: Kubernetes liveness probe endpoint.

## Authentication
No authentication required for this basic deployment. In production environments, authentication headers would be required.

## Rate Limiting
No rate limiting implemented in this basic deployment. In production environments, rate limiting would apply per client IP.

## Request/Response Examples

### Chat Request Example:
```
POST /chat
Content-Type: application/json

{
  "message": "Add a new todo: Buy groceries"
}
```

### Chat Response Example:
```
{
  "response": "I've added 'Buy groceries' to your todo list.",
  "action": "add_todo",
  "todos": [
    {
      "id": "1",
      "task": "Buy groceries",
      "completed": false,
      "created_at": "2026-01-02T10:00:00Z"
    }
  ],
  "status": "success"
}
```